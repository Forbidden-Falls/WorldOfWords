<link href="~/Content/PagedList.css" rel="stylesheet" type="text/css" />
@{
    Layout = "~/Views/Shared/_Layout.cshtml";
}

<div id="store">
    @using (Ajax.BeginForm("Store", "Store", new AjaxOptions()
        {
            InsertionMode = InsertionMode.Replace,
            UpdateTargetId = "words-section"
        }, new { @id = "search-form"}))
    {
        <p>
            <label for="search-box">Search:</label>
            @Html.TextBox("SearchString", ViewBag.CurrentFilter as string, new { @id = "search-box", @class="form-control" })
        </p>
    }
    <div id="words-section">

    </div>
    <div id="shop-cart">

    </div>
</div>
<script>
    loadShop().success(function(data) {
        $("#words-section").html(data);
    });

    $("#search-box").keyup(function (data) {
        $("#search-form").submit();
    });

    var jsonShopList;
    var shopList = [];

    @if (@Session["shopList"] != null)
    {
        @:jsonShopList = '@Html.Raw(@Session["shopList"])';
    }
    
    if (jsonShopList != null && jsonShopList != "null") {
        shopList = JSON.parse(jsonShopList);
        loadShopCartIntoView(shopList);
    }
</script>